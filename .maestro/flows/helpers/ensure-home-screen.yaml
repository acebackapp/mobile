# Helper: Ensure app is on home screen (sign in if needed)
# This handles both fresh app (needs sign-in) and already signed-in states
# Uses environment variables for credentials:
#   E2E_TEST_EMAIL - test account email
#   E2E_TEST_PASSWORD - test account password
appId: com.discr.app
---
# Wait for app to load
- waitForAnimationToEnd

# Sign in if needed
- runFlow:
    when:
      visible: "Sign In"
    file: do-sign-in.yaml

# Wait for home tab to be visible (indicates app is loaded and on tabs)
- extendedWaitUntil:
    visible: "Home"
    timeout: 15000

# Tap Home tab to ensure we're on the home screen
- tapOn: "Home"
- waitForAnimationToEnd
